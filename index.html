<!DOCTYPE html>
<html>

<head>
        <script type="text/javascript" src="MV.js"></script>
    <title>WebGL Example</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Basic vertex shader -->
    <script id="vs_basic" type="x-shader/x-vertex">
            attribute vec3 aPosition;
            attribute vec3 aColor;
            attribute vec3 aNormal;

            // model matrix
            uniform mat4 uMMatrix;
            // transposed inverse of the model matrix for transforming normals
            uniform mat3 uMMatrixTInv;
            // projection matrix
            uniform mat4 uPMatrix;
            
            varying mediump vec3 vColor;
            varying mediump vec3 vNormal;

            void main() {
                gl_Position = uPMatrix * uMMatrix * vec4(aPosition, 1.0);
                vColor = aColor;
                vNormal = mat3(uMMatrixTInv) * aNormal;
            }
        </script>
    <!-- Basic fragment shader -->
    <script id="fs_basic" type="x-shader/x-fragment">
                    varying mediump vec3 vColor;
                    varying mediump vec3 vNormal;
                    
                    void main() {
                        // direction of parallel light source
                        const mediump vec3 lightDir = vec3(-1.0, -1.0, -1.0);
                        mediump float intensity = max(0.0, -dot(normalize(vNormal), lightDir));
                        // diffuse reflection + ambient light
                        gl_FragColor = vec4(vColor * intensity + vColor * 0.1, 1.0);
                    }
                </script>

    <script id="vertex-shader" type="x-shader/x-vertex">
                    attribute vec3 aPosition;
                    attribute vec3 aColor;
                    
        
                    // model matrix
                    uniform mat4 uMMatrix;
                    // transposed inverse of the model matrix for transforming normals
                  
                    // projection matrix
                    uniform mat4 uPMatrix;
                    
                    varying mediump vec3 vColor;
                  
                    void main()
                    {
                    vColor = aColor;
                    gl_Position = uPMatrix * uMMatrix * vec4(aPosition, 1.0);
                    }
                    </script>
    <script id="vertex-shader1" type="x-shader/x-vertex">
                        attribute vec3 aPosition;
                        attribute vec3 aColor;
                        
            
                        // model matrix
                        uniform mat4 uMMatrix;
                        // transposed inverse of the model matrix for transforming normals
                      
                        // projection matrix
                        uniform mat4 uPMatrix;
                        
                        varying mediump vec3 vColor;
                      
                        void main()
                        {
                        vColor = aColor;
                        gl_Position = uPMatrix * uMMatrix * vec4(aPosition, 1.0);
                        }
                        </script>
    <script id="vertex-shader2" type="x-shader/x-vertex">
                            attribute vec3 aPosition;
                            attribute vec3 aColor;
                            
                
                            // model matrix
                            uniform mat4 uMMatrix;
                            // transposed inverse of the model matrix for transforming normals
                          
                            // projection matrix
                            uniform mat4 uPMatrix;
                            
                            varying mediump vec3 vColor;
                          
                            void main()
                            {
                            vColor = aColor;
                            gl_Position = uPMatrix * uMMatrix * vec4(aPosition, 1.0);
                            }
                            </script>

    <script id="fragment-shader" type="x-shader/x-fragment">

                        varying mediump vec3 vColor;
                      
                    
                    void main()
                    {
                        gl_FragColor = vec4(vColor,1.0 );
                    }
                    </script>


    <script id="sphere-vertex-shader" type="x-shader/x-vertex">
                                    attribute vec4 aPosition;
                                    attribute vec4 aColor;
                                    varying vec4 fColor;
                                    uniform mat4 uMMatrix;
                                   
                                    uniform mat4 uPMatrix;
                        
                                 
                                    void main()
                                    {
                                    fColor = aColor;
                                    gl_Position = uPMatrix * uMMatrix * aPosition;
                                    }
                                    </script>

    <script id="sphere-fragment-shader1" type="x-shader/x-fragment">

                                        precision mediump float;
                                        
                                        varying vec3 vColor;
                                        
                                        void main()
                                        {
                                            gl_FragColor = vec4(0.0,0.0,0.2,1.0);
                                        }
                                        </script>
    <script id="sphere-fragment-shader2" type="x-shader/x-fragment">

                                        precision mediump float;
                                        
                                        varying vec3 vColor;
                                        
                                        void main()
                                        {
                                            gl_FragColor = vec4(1.0,0.5,0.2,1.0);
                                        }
                                        </script>
    <script id="gauraud-vertex-shader" type="x-shader/x-fragment">

                                            attribute vec4 aPosition;
                                            attribute vec4 aNormal;

                                            uniform mat4 uMMatrix;                                        
                                            uniform mat4 uPMatrix;
                                            uniform mat4 normalMatrix;
                                            uniform vec4 diffColor;
                                            uniform vec4 specColor;                                           
                                           
                                            uniform vec4 lightPos;
                                            uniform float shin;

                                            uniform float mode; 
                                            varying vec3 N, L, E;

                                            varying vec4 fColor;
                                            varying float fmode;



                                            varying vec4 fdiffColor;
                                            varying vec4 fspecColor;
                                            varying float fshin;
                                            

                                            

                                            varying vec4 nNormal;
                                            void main()
                                            {   
                                                fmode = mode;
                                                gl_Position = uPMatrix * uMMatrix * aPosition;
                                                vec3 eyePos = (uMMatrix * aPosition).xyz;
                                              //  vec3 L ;
                                                
                                                if(lightPos.w == 0.0) L = normalize(lightPos.xyz);
                                                else L = normalize( lightPos.xyz - eyePos );

                                                //vec3
                                                 E = -normalize( eyePos );

                                                
                                                //vec3
                                                 N = normalize((normalMatrix * aNormal).xyz);
                                                
                                                float Kd = max( dot(L, N), 0.0 );
                                                vec4  diffuse = Kd*diffColor;

                                                vec3 H = normalize( L + E );
                                                float Ks = pow( max(dot(N, H), 0.0), shin );
                                                vec4  specular = Ks * specColor;
                                                
                                                if( dot(L, N) < 0.0 ) {
                                                specular = vec4(0.0, 0.0, 0.0, 1.0);
                                                } 

                                                if(mode==0.0)fColor=diffuse;
                                                if(mode==1.0)fColor=specular;
                                                fColor.a  =1.0;

                                                fdiffColor = diffColor;
                                                fspecColor = specColor;
                                                fshin = shin;

                                            }
                                            </script>
    <script id="gauraud-fragment-shader" type="x-shader/x-fragment">

                                            precision mediump float;

                                            varying vec4 fdiffColor;
                                            varying vec4 fspecColor;
                                            varying float fshin;
                                            
                                            varying vec4 fColor;
                                            varying float fmode;
                                            varying vec3 N, L, E;

                                            
                                            
                                            void main()
                                            {
                                                vec3 H = normalize( L + E );
                                                float Kd = max( dot(L, N), 0.0 );
                                                vec4  diffuse = Kd*fdiffColor;

                                                
                                                float Ks = pow( max(dot(N, H), 0.0), fshin );
                                                vec4  specular = Ks * fspecColor;                                                
                                                if( dot(L, N) < 0.0 ) specular = vec4(0.0, 0.0, 0.0, 1.0);


                                                if(fmode==0.0) gl_FragColor = fColor;
                                                if(fmode==1.0) gl_FragColor=fColor;
                                                if(fmode==2.0){
                                                       vec4 Color = diffuse;
                                                        Color.a = 1.0;
                                                        gl_FragColor = Color;
                                                }
                                                if(fmode==3.0){
                                                    vec4 Color = specular;
                                                    Color.a = 1.0;
                                                    gl_FragColor =  Color;

                                                }
                                            }
                                            </script>



    <!-- gl-matrix.js for linear algebra -->

</head>

<body onload="main()">
    <div>
        <canvas id="glCanvas" width="640" height="640"></canvas>
    </div>
    <input type="checkbox" id="myCheck" checked>

</body>
<button onclick="setfalse()">b</button>


<script type="text/javascript" src="gl-matrix/gl-matrix-min.js"></script>
<script type="text/javascript" src="initShaders.js"></script>
<script type="text/javascript" src="MV2.js"></script>


<script type="text/javascript" src="coordinateSystem.js"></script>
<script type="text/javascript" src="script.js"></script>
<script type="text/javascript" src="cube.js"></script>
<script type="text/javascript" src="sphere.js"></script>
<script type="text/javascript" src="shadedsphere.js"></script>
<script type="text/javascript" src="l.js"></script>

</html>